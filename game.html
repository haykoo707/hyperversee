<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
        }
        #gameContainer {
            width: 90vw;
            height: 70vh;
            max-width: 400px;
            max-height: 500px;
            border: 3px solid black;
            margin: auto;
            position: relative;
            overflow: hidden;
            background-color: white;
        }
        #player {
            width: 45px;
            height: 90px;
            background: #00d0ff;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10%;
            transition: left 0.1s ease-in-out;
        }
        .fallingObject {
            width: 30px;
            height: 30px;
            background: red;
            position: absolute;
            top: 0;
            border-radius: 50%;
            animation: fall linear;
        }
        @keyframes fall {
            from { transform: translateY(0); }
            to { transform: translateY(100vh); }
        }
        #gameOverPopup {
            position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 150px;
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 15px #00d0ff;
  text-align: center;
  display: none; /* Initially hidden */
        }
        canvas {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
}
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
  100% { transform: translateX(0); }
}
.glow {
  animation: shake 2.8s ease infinite;
  
  text-align: center;
  font-size: 1.7em;
  text-shadow: 0 0 10px #393939, 0 0 25px #858585;

}
.restart{
    margin-top: 15px;
  padding: 10px 20px;
  background: #00d0ff;
  border: none;
  color: rgb(0, 0, 0);
  font-size: 14px;
  border-radius: 5px;
  transition: 0.3s;
}
#backButton {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #00d0ff;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #backButton:hover {
            background-color: #00a7cd;
        }
    </style>
</head>
<body>
    <canvas id="starCanvas"></canvas>
    <a href="index.html">
        <button id="backButton">Back</button>
      </a>

    <h2 class="glow">HyperVerseðŸ›¸</h2>
    <p>Swipe left or right to move</p>
    <div id="gameContainer">
        <div id="player"></div>
    </div>
    <p>Score: <span id="score">0</span></p>
    <p>User Score: <span id="userScore">0</span></p>
    <div id="gameOverPopup">
        <h3>Game Over</h3>
        <button class="restart" onclick="restartGame()">Restart</button>
    </div>
    <script>
        let player = document.getElementById("player");
        let container = document.getElementById("gameContainer");
        let scoreDisplay = document.getElementById("score");
        let userScoreDisplay = document.getElementById("userScore");
        let gameOverPopup = document.getElementById("gameOverPopup");
        let playerPos = container.clientWidth / 2 - 25;
        let score = 0;
        let userScore = localStorage.getItem("userScore") || 0;
        userScoreDisplay.textContent = userScore;

        let touchStartX = 0;
        container.addEventListener("touchstart", (e) => {
            touchStartX = e.touches[0].clientX;
        });
        
        container.addEventListener("touchmove", (e) => {
            let touchX = e.touches[0].clientX;
            let deltaX = touchX - touchStartX;
            playerPos += deltaX * 0.5;
            playerPos = Math.max(0, Math.min(container.clientWidth - 50, playerPos));
            player.style.left = playerPos + "px";
            touchStartX = touchX;
        });

        function createFallingObject() {
            let obj = document.createElement("div");
            obj.classList.add("fallingObject");
            obj.style.left = Math.random() * (container.clientWidth - 30) + "px";
            container.appendChild(obj);
            obj.style.animationDuration = Math.random() * 2 + 2 + "s";

            let fallInterval = setInterval(() => {
                let objRect = obj.getBoundingClientRect();
                let playerRect = player.getBoundingClientRect();

                if (objRect.bottom >= playerRect.top && objRect.left > playerRect.left - 20 && objRect.right < playerRect.right + 20) {
                    score++;
                    userScore++;  // Increase both score and userScore
                    scoreDisplay.textContent = score;
                    userScoreDisplay.textContent = userScore;
                    localStorage.setItem("userScore", userScore);  // Store updated userScore
                    obj.remove();
                    clearInterval(fallInterval);
                }
                if (objRect.top > container.clientHeight) {
                    gameOver();
                    obj.remove();
                    clearInterval(fallInterval);
                }
            }, 10);
        }
        
        function gameOver() {
            gameOverPopup.style.display = "block";
        }
        
        function restartGame() {
            location.reload();
        }
        
        setInterval(createFallingObject, 1000);
        const canvas = document.getElementById("starCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const stars = [];
const numStars = 333;

for (let i = 0; i < numStars; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2,
        speed: Math.random() * 0.4 + 0.2,
    });
}

function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "black";

    stars.forEach((star) => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fill();

        star.y += star.speed;
        if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
        }
    });

    requestAnimationFrame(drawStars);
}

drawStars();

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

    </script>
</body>
</html>
